# Internationalization (i18n)

ì´ ë¬¸ì„œëŠ” í”„ë¡œíŒŒì¼ëŸ¬ì˜ ë‹¤êµ­ì–´ ì§€ì› ì‹œìŠ¤í…œì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ê°œìš”

`src/truthound/profiler/i18n.py`ì— êµ¬í˜„ëœ êµ­ì œí™” ì‹œìŠ¤í…œì€ 7ê°œ ì–¸ì–´ë¥¼ ì§€ì›í•˜ë©°, 3ê°œ ì–¸ì–´(ì˜ì–´, í•œêµ­ì–´, ì¼ë³¸ì–´)ëŠ” ë‚´ì¥ ë²ˆì—­ì„ ì œê³µí•©ë‹ˆë‹¤.

## ì§€ì› ì–¸ì–´

| ì–¸ì–´ ì½”ë“œ | ì–¸ì–´ | ë‚´ì¥ ë²ˆì—­ |
|-----------|------|-----------|
| `en` | English | âœ… ì™„ì „ ì§€ì› |
| `ko` | í•œêµ­ì–´ | âœ… ì™„ì „ ì§€ì› |
| `ja` | æ—¥æœ¬èª | âœ… ì™„ì „ ì§€ì› |
| `zh` | ä¸­æ–‡ | ğŸ“ ì¹´íƒˆë¡œê·¸ë§Œ |
| `de` | Deutsch | ğŸ“ ì¹´íƒˆë¡œê·¸ë§Œ |
| `fr` | FranÃ§ais | ğŸ“ ì¹´íƒˆë¡œê·¸ë§Œ |
| `es` | EspaÃ±ol | ğŸ“ ì¹´íƒˆë¡œê·¸ë§Œ |

## MessageCode

50ê°œ ì´ìƒì˜ ë©”ì‹œì§€ ì½”ë“œê°€ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê°’ì€ ë„íŠ¸ í‘œê¸°ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```python
class MessageCode(str, Enum):
    """ë©”ì‹œì§€ ì½”ë“œ"""

    # ë¶„ì„ ë©”ì‹œì§€ (analysis.*)
    ANALYSIS_FAILED = "analysis.failed"
    ANALYSIS_COLUMN_FAILED = "analysis.column_failed"
    ANALYSIS_TABLE_FAILED = "analysis.table_failed"
    ANALYSIS_EMPTY_DATA = "analysis.empty_data"
    ANALYSIS_SKIPPED = "analysis.skipped"

    # íŒ¨í„´ ë©”ì‹œì§€ (pattern.*)
    PATTERN_UNKNOWN = "pattern.unknown"
    PATTERN_INVALID = "pattern.invalid"
    PATTERN_NOT_FOUND = "pattern.not_found"

    # íƒ€ì… ë©”ì‹œì§€ (type.*)
    TYPE_UNKNOWN = "type.unknown"
    TYPE_MISMATCH = "type.mismatch"
    TYPE_INFERENCE_FAILED = "type.inference_failed"

    # IO ë©”ì‹œì§€ (io.*)
    IO_READ_FAILED = "io.read_failed"
    IO_WRITE_FAILED = "io.write_failed"
    IO_FILE_NOT_FOUND = "io.file_not_found"

    # íƒ€ì„ì•„ì›ƒ ë©”ì‹œì§€ (timeout.*)
    TIMEOUT_EXCEEDED = "timeout.exceeded"
    TIMEOUT_WARNING = "timeout.warning"

    # ê²€ì¦ ë©”ì‹œì§€ (validation.*)
    VALIDATION_FAILED = "validation.failed"
    VALIDATION_SKIPPED = "validation.skipped"

    # ì„¤ì • ë©”ì‹œì§€ (config.*)
    CONFIG_INVALID = "config.invalid"
    CONFIG_MISSING = "config.missing"

    # ì—ëŸ¬ ë©”ì‹œì§€ (err.*)
    ERR_UNKNOWN = "err.unknown"
```

## LocaleManager

ìŠ¤ë ˆë“œ ì•ˆì „í•œ ë¡œì¼€ì¼ ê´€ë¦¬ìì…ë‹ˆë‹¤.

```python
from truthound.profiler.i18n import LocaleManager

manager = LocaleManager()

# í˜„ì¬ ë¡œì¼€ì¼ ì¡°íšŒ (property)
current = manager.current  # "en"

# ë¡œì¼€ì¼ ì„¤ì •
manager.set_locale("ko")

# ë¡œì¼€ì¼ ì¡°íšŒ (ë©”ì„œë“œ)
locale = manager.get_locale()  # "ko"

# í´ë°± ì²´ì¸ ì¡°íšŒ
chain = manager.get_fallback_chain("ko_KR")  # ["ko_KR", "ko", "en"]

# ìƒˆ ë¡œì¼€ì¼ ë“±ë¡
manager.register_locale("zh_CN", fallback="zh")

# ìŠ¤ë ˆë“œë³„ ë¡œì¼€ì¼
import threading
# ê° ìŠ¤ë ˆë“œëŠ” ë…ë¦½ì ì¸ ë¡œì¼€ì¼ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ
```

## MessageCatalog

ë©”ì‹œì§€ ë²ˆì—­ ì¹´íƒˆë¡œê·¸ì…ë‹ˆë‹¤. ë¡œì¼€ì¼ë³„ë¡œ ìƒì„±ë©ë‹ˆë‹¤.

```python
from truthound.profiler.i18n import MessageCatalog

# ë¡œì¼€ì¼ê³¼ ë©”ì‹œì§€ ë”•ì…”ë„ˆë¦¬ë¡œ ìƒì„±
messages = {
    "analysis.failed": "ë¶„ì„ ì‹¤íŒ¨: {reason}",
    "analysis.column_failed": "ì»¬ëŸ¼ ë¶„ì„ ì‹¤íŒ¨: {column}",
}
catalog = MessageCatalog("ko", messages)

# ë©”ì‹œì§€ ì¡°íšŒ (ë³µìˆ˜í˜• ì§€ì›)
msg = catalog.get("analysis.failed")  # "ë¶„ì„ ì‹¤íŒ¨: {reason}"
msg = catalog.get("item.count", count=5)  # ë³µìˆ˜í˜• ì²˜ë¦¬

# í‚¤ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
if catalog.has("analysis.failed"):
    print("í‚¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤")

# ëª¨ë“  í‚¤ ì¡°íšŒ
all_keys = catalog.keys()  # ["analysis.failed", "analysis.column_failed", ...]
```

## I18n ì‹±ê¸€í†¤

ì „ì—­ I18n ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤.

```python
from truthound.profiler.i18n import I18n

# ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ íšë“
i18n = I18n.get_instance()

# ë¡œì¼€ì¼ ì„¤ì •
i18n.set_locale("ko")

# ë²ˆì—­ëœ ë©”ì‹œì§€ ê°€ì ¸ì˜¤ê¸° (t ë©”ì„œë“œ ì‚¬ìš©)
msg = i18n.t("analysis.failed", reason="ë°ì´í„° ì—†ìŒ")
print(msg)  # "ë¶„ì„ ì‹¤íŒ¨: ë°ì´í„° ì—†ìŒ"

# í‚¤ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
if i18n.has("analysis.failed"):
    print("í‚¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤")

# ëª¨ë“  í‚¤ ì¡°íšŒ
all_keys = i18n.list_keys()

# ì»¤ìŠ¤í…€ ë¡œë” ì¶”ê°€
i18n.add_loader(my_custom_loader)
```

## í¸ì˜ í•¨ìˆ˜

```python
from truthound.profiler.i18n import set_locale, get_locale, get_message, t

# ì „ì—­ ë¡œì¼€ì¼ ì„¤ì •
set_locale("ko")

# í˜„ì¬ ë¡œì¼€ì¼ ì¡°íšŒ
locale = get_locale()  # "ko"

# ë©”ì‹œì§€ ê°€ì ¸ì˜¤ê¸°
msg = get_message("analysis.failed", reason="ë°ì´í„° ì˜¤ë¥˜")
print(msg)  # "ë¶„ì„ ì‹¤íŒ¨: ë°ì´í„° ì˜¤ë¥˜"

# ë‹¨ì¶• alias (t í•¨ìˆ˜)
msg = t("pattern.not_found", pattern="email")
```

## ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €

ì„ì‹œ ë¡œì¼€ì¼ ì „í™˜ì„ ìœ„í•œ ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €ì…ë‹ˆë‹¤.

```python
from truthound.profiler.i18n import locale_context

# ì„ì‹œë¡œ ì¼ë³¸ì–´ ì‚¬ìš©
with locale_context("ja"):
    msg = get_message(MessageCode.ANALYSIS_STARTED)
    print(msg)  # æ—¥æœ¬èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

# ì»¨í…ìŠ¤íŠ¸ ì¢…ë£Œ í›„ ì›ë˜ ë¡œì¼€ì¼ë¡œ ë³µì›
```

## ê³„ì¸µì  í´ë°±

ë¡œì¼€ì¼ì´ ì—†ì„ ê²½ìš° í´ë°± ì²´ì¸ì„ ë”°ë¦…ë‹ˆë‹¤.

```python
# í´ë°± ìˆœì„œ: ko_KR â†’ ko â†’ en

# ko_KR ë©”ì‹œì§€ê°€ ì—†ìœ¼ë©´ ko ì‚¬ìš©
# ko ë©”ì‹œì§€ê°€ ì—†ìœ¼ë©´ en ì‚¬ìš©
```

## I18nError ì˜ˆì™¸ ê³„ì¸µ

êµ­ì œí™”ëœ ì˜ˆì™¸ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

```python
from truthound.profiler.i18n import (
    I18nError,
    I18nAnalysisError,
    I18nPatternError,
    I18nTypeError,
    I18nIOError,
    I18nTimeoutError,
    I18nValidationError,
)

try:
    profile = profiler.profile_file("nonexistent.csv")
except I18nIOError as e:
    # ì—ëŸ¬ ë©”ì‹œì§€ê°€ í˜„ì¬ ë¡œì¼€ì¼ë¡œ ë²ˆì—­ë¨
    print(e.localized_message)  # "íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: nonexistent.csv"
    print(e.message_code)       # MessageCode.IO_FILE_NOT_FOUND
```

ê° ì˜ˆì™¸ í´ë˜ìŠ¤ì˜ ê¸°ë³¸ ë©”ì‹œì§€ ì½”ë“œ:

| ì˜ˆì™¸ í´ë˜ìŠ¤ | ê¸°ë³¸ ë©”ì‹œì§€ ì½”ë“œ |
|-------------|-----------------|
| `I18nError` | `err.unknown` |
| `I18nAnalysisError` | `analysis.failed` |
| `I18nPatternError` | `pattern.unknown` |
| `I18nTypeError` | `type.unknown` |
| `I18nIOError` | `io.read_failed` |
| `I18nTimeoutError` | `timeout.exceeded` |
| `I18nValidationError` | `validation.failed` |

## ë‚´ì¥ ë²ˆì—­ (ì˜ì–´)

```python
ENGLISH_MESSAGES = {
    "analysis.failed": "Analysis failed: {reason}",
    "analysis.column_failed": "Column analysis failed: {column}",
    "analysis.table_failed": "Table analysis failed: {table}",
    "analysis.empty_data": "Empty data provided",
    "pattern.unknown": "Unknown pattern",
    "pattern.not_found": "Pattern not found: {pattern}",
    "type.unknown": "Unknown type",
    "type.mismatch": "Type mismatch: expected {expected}, got {actual}",
    "io.read_failed": "Failed to read: {path}",
    "io.file_not_found": "File not found: {path}",
    # ...
}
```

## ë‚´ì¥ ë²ˆì—­ (í•œêµ­ì–´)

```python
KOREAN_MESSAGES = {
    "analysis.failed": "ë¶„ì„ ì‹¤íŒ¨: {reason}",
    "analysis.column_failed": "ì»¬ëŸ¼ ë¶„ì„ ì‹¤íŒ¨: {column}",
    "analysis.table_failed": "í…Œì´ë¸” ë¶„ì„ ì‹¤íŒ¨: {table}",
    "analysis.empty_data": "ë¹ˆ ë°ì´í„°ê°€ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤",
    "pattern.unknown": "ì•Œ ìˆ˜ ì—†ëŠ” íŒ¨í„´",
    "pattern.not_found": "íŒ¨í„´ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {pattern}",
    "type.unknown": "ì•Œ ìˆ˜ ì—†ëŠ” íƒ€ì…",
    "type.mismatch": "íƒ€ì… ë¶ˆì¼ì¹˜: {expected} ì˜ˆìƒ, {actual} ë°›ìŒ",
    "io.read_failed": "ì½ê¸° ì‹¤íŒ¨: {path}",
    "io.file_not_found": "íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {path}",
    # ...
}
```

## ë‚´ì¥ ë²ˆì—­ (ì¼ë³¸ì–´)

```python
JAPANESE_MESSAGES = {
    "analysis.failed": "åˆ†æå¤±æ•—: {reason}",
    "analysis.column_failed": "ã‚«ãƒ©ãƒ åˆ†æå¤±æ•—: {column}",
    "analysis.table_failed": "ãƒ†ãƒ¼ãƒ–ãƒ«åˆ†æå¤±æ•—: {table}",
    "analysis.empty_data": "ç©ºã®ãƒ‡ãƒ¼ã‚¿ãŒæä¾›ã•ã‚Œã¾ã—ãŸ",
    "pattern.unknown": "ä¸æ˜ãªãƒ‘ã‚¿ãƒ¼ãƒ³",
    "pattern.not_found": "ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: {pattern}",
    "type.unknown": "ä¸æ˜ãªå‹",
    "type.mismatch": "å‹ã®ä¸ä¸€è‡´: {expected}ã‚’æœŸå¾…ã€{actual}ã‚’å—ä¿¡",
    "io.read_failed": "èª­ã¿å–ã‚Šå¤±æ•—: {path}",
    "io.file_not_found": "ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: {path}",
    # ...
}
```

## ì»¤ìŠ¤í…€ ë©”ì‹œì§€ ë“±ë¡

```python
from truthound.profiler.i18n import register_messages

# ì»¤ìŠ¤í…€ ë©”ì‹œì§€ ë“±ë¡
custom_messages = {
    "MY_CUSTOM_MSG": "Custom message with {placeholder}",
}
register_messages("en", custom_messages)

# íŒŒì¼ì—ì„œ ë¡œë“œ
from truthound.profiler.i18n import load_messages_from_file
load_messages_from_file("my_messages.yaml", locale="ko")
```

## ë¦¬í¬íŠ¸ êµ­ì œí™”

```python
from truthound.profiler.visualization import HTMLReportGenerator, ReportConfig
from truthound.profiler.i18n import set_locale

# í•œêµ­ì–´ ë¦¬í¬íŠ¸ ìƒì„±
set_locale("ko")
generator = HTMLReportGenerator()
html = generator.generate(profile)
# ë¦¬í¬íŠ¸ ë‚´ ëª¨ë“  í…ìŠ¤íŠ¸ê°€ í•œêµ­ì–´ë¡œ í‘œì‹œë¨
```

## CLI ì‚¬ìš©ë²•

```bash
# í•œêµ­ì–´ í”„ë¡œíŒŒì¼ë§
th profile data.csv --locale ko

# ì¼ë³¸ì–´ ë¦¬í¬íŠ¸ ìƒì„±
th profile data.csv --locale ja --output report.html

# ì‹œìŠ¤í…œ ë¡œì¼€ì¼ ì‚¬ìš©
th profile data.csv --locale auto
```

## í™˜ê²½ ë³€ìˆ˜

| ë³€ìˆ˜ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|--------|
| `TRUTHOUND_LOCALE` | ê¸°ë³¸ ë¡œì¼€ì¼ | `en` |
| `LANG` | ì‹œìŠ¤í…œ ë¡œì¼€ì¼ (í´ë°±) | - |

## ë‹¤ìŒ ë‹¨ê³„

- [ì‹œê°í™”](visualization.md) - êµ­ì œí™”ëœ ë¦¬í¬íŠ¸ ìƒì„±
- [ë¶„ì‚° ì²˜ë¦¬](distributed.md) - ë¶„ì‚° í™˜ê²½ì—ì„œ ë¡œì¼€ì¼ ê´€ë¦¬
